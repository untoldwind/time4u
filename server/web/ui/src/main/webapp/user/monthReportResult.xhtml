<?xml version="1.0" encoding="utf-8" ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:s="http://jboss.com/products/seam/taglib" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich"
	template="../templates/main-template.xhtml">

	<ui:define name="title">Month report</ui:define>
	<ui:define name="contentDetail">
		<h:form>
			<table class="report">
				<thead class="report reportHeader">
					<tr class="report reportHeader">
						<ui:repeat value="#{user.monthReportController.reportResult.groupByColumns}"
							var="column">
							<th class="report reportHeader">#{column.header}</th>
						</ui:repeat>
						<ui:repeat value="#{user.monthReportController.reportResult.columns}"
							var="column">
							<th class="report reportHeader">#{column.header}</th>
						</ui:repeat>
					</tr>
				</thead>
				<tbody class="report">
					<ui:repeat value="#{user.monthReportController.reportResult.rows}"
						var="row" rendered="#{!user.monthReportController.reportResult.hasGroups}">
						<tr class="report #{row.index % 2 == 0 ? 'reportEven' : 'reportOdd'}">
							<ui:repeat value="#{user.monthReportController.reportResult.columns}"
								var="column">
								<td class="report #{row.index % 2 == 0 ? 'reportEven' : 'reportOdd'} report#{column.columnType}">
									<h:outputText value="#{row.data[column.index]}" converter="#{user.monthReportController.getConverter(column.columnType)}"/>
								</td>
							</ui:repeat>
						</tr>
					</ui:repeat>
					<ui:repeat value="#{user.monthReportController.reportResult.groups}" var="group" rendered="#{user.monthReportController.reportResult.hasGroups}">
						<tr class="report reportGroupHeader">
							<td class="report reportGroupHeader">
								<h:outputText value="#{group.label}" converter="#{user.monthReportController.getConverter(user.monthReportController.reportResult.groupByColumns[0].columnType)}"/>
							</td>
							<td class="report reportGroupHeader" colspan="#{user.monthReportController.reportResult.columns.size() + user.monthReportController.reportResult.groupByColumns.size() - 1}"/>
						</tr>
						<ui:include src="reportResultGroup.xhtml">
							<ui:param name="report" value="#{group}"/>
						</ui:include>
					</ui:repeat>
				</tbody>
			</table>
		</h:form>
	</ui:define>
</ui:composition>
